<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>a2z anime</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

  <link rel="stylesheet" href="../hide.css">
  <link rel="stylesheet" href="app.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>

<body>
  <nav id="nav"></nav>
  <div style="height: 400px;"><iframe style="height: 400px;" allowfullscreen="" frameborder="0" id="myFrame"
      src="https://www.short.ink/vd4WE0rZ1mD" width="100%"></iframe></div>

  <div class="conbtn">
    <button id="back" class="btn ">back</button>

    <button id="next" class="btn ">
      <a style="font-weight: bold;"></a>next</a></button>
  </div>

  <div id="episodeno" class="epnumber"></div>

  <h2>All Episodes</h2>


  <ul id="video" class="video"></ul>


  <footer id="footer"></footer>



  <style>
    .material-symbols-outlined play {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48
    }
  </style>

  <script>

    let apidata;
    const start = async () => {
      const api = await fetch("../src/api/lookism/s1.json");

      apidata = await api.json();


      // var objj=JSON.parse(apii);
      var lo1 =["vd4WE0rZ1mD","QIodR2eO0Vb","HKvcrqw1DvZ","QZExLXe8Ysw","S0Gh4DhEkqd","DZ6TwKaWD89","rk6c77CFgH3","Pdis23rscec"]
      let numep = 1;
      let totalep = apidata.length;//total number of episodes 



      let i = 0;

      let epdisplay = 8;
      const episodeno = document.getElementById('episodeno');
      //generate element of video
      const epcreate = (i, epdisplay) => {//call by event listner and value given it
        for (i; i < epdisplay; i++) {


          let create = document.createElement("li");

          create.innerHTML = `
           <li class="card">
    
<figure><img src="${apidata[i].image}" alt="" class="thumbnail" /></figure>

<span class="epnumber">Episode${i+1}</span>
<header>${apidata[i].title}</header>
<span class="material-symbols-outlined play">
 play_circle
 </span>
</li>
          `
            ;

          let select = document.getElementById("video");
          select.appendChild(create);
        }
      };

      //for gett all element list
      epcreate(i, epdisplay);




      function loadEp(numep) {
        document.getElementById("myFrame").setAttribute("src", "https://www.short.ink/" + lo1[numep - 1])
        document.querySelector("#myFrame").scrollIntoView();



      }



      let videoCard;


      // for click event on cards

      const selli = () => {
        videoCard = document.querySelectorAll(".card");           //for gett all element list
        // console.log(videoCard);

        Array.from(videoCard).forEach((element) => {                // for each loop fpr travel from all videoCard
          element.addEventListener("click", () => {                //add event listner on all video cards
            numep = (element.innerText).substring(9, 10);
            console.log(numep)

            loadEp(numep)




            Array.from(videoCard).forEach((element) => {                //travel all card and remove check class
              element.classList.remove('check')
            })

            element.classList.toggle('check')                               //add check class on click card
            episodeno.innerText = `Episode${numep}`
          })
        });
      }
      selli();

      //event listner for back and next button

      back.addEventListener("click", () => {
        if (numep == 1) {

          console.log("end");
        }
        else {
          Array.from(videoCard).forEach((element) => {                //travel all card and remove check class
            element.classList.remove('check')
          })

          numep -= 1
          videoCard[numep - 1].classList.toggle('check')
          episodeno.innerText = `Episode${numep}`
          // console.log(numep)
          loadEp(numep)

        }
      })

      next.addEventListener("click", () => {

        if (numep == totalep) {

          console.log("end")
        }
        else {



          Array.from(videoCard).forEach((element) => {                //travel all card and remove check class
            element.classList.remove('check')
          })
          numep -= 1
          numep += 1
          videoCard[numep].classList.toggle('check')
          // console.log(numep+1)
          episodeno.innerText = `Episode${numep + 1}`
          loadEp(numep + 1)
          numep += 1
        }
      })

    }
    start();
  </script>
  <script src="../script/navbar.js"></script>
  <script src="../script/footer.js"></script>
</body>

</html>